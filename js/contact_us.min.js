function uploadFile(){console.log("Uploading file...");var e=_("file").files[0],s=new FormData;s.append("file",e);var a=new XMLHttpRequest;a.upload.addEventListener("progress",progressHandler,!1),a.addEventListener("load",completeHandler,!1),a.addEventListener("error",errorHandler,!1),a.addEventListener("abort",abortHandler,!1),a.open("POST","contact_form_submission.php"),a.send(s),$("#progressContainer").show()}function progressHandler(e){_("status").innerHTML=Math.round(e.loaded/e.total*100)+"% uploaded... please wait",_("progressBar").value=Math.round(e.loaded/e.total*100)}function completeHandler(e){console.log("File upload complete."),_("status").innerHTML=e.target.responseText,_("progressBar").value=0,$("#progressContainer").hide()}function errorHandler(e){_("status").innerHTML="Upload Failed"}function abortHandler(e){_("status").innerHTML="Upload Aborted"}function _(e){return document.getElementById(e)}function isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function isValidPhone(e){return/^\d{10}$/.test(e)}function displayResponse(e,s){var a=$("#responseContainer");a.empty(),a.append("<p style='color: "+(s?"red":"green")+"'>"+e+"</p>")}$(document).ready(function(){$("#submitBtn").click(function(e){e.preventDefault(),$("#submitBtn").prop("disabled",!0),$("#submitBtn").html('<i class="fas fa-spinner fa-spin"></i> Sending...');var s=grecaptcha.getResponse();if(""===s){displayResponse("Please complete the reCAPTCHA verification.",!0),$("#submitBtn").prop("disabled",!1).html('Send Message <i class="fal fa-long-arrow-right"></i>');return}var a=$("#name").val(),n=$("#email").val(),r=$("#phone").val(),i=$("#enquireFor").val(),t=$("#message").val();if($("#phone").on("input",function(){var e=$(this).val();e=e.replace(/\D/g,""),$(this).val(e),""===e.trim()||isValidPhone(e.trim())?$("#responseContainer").empty():displayResponse("Please Enter 10 Digits Number.",!0)}),""!==n.trim()&&!isValidEmail(n.trim())){displayResponse("Please enter a valid email address",!0),$("#submitBtn").prop("disabled",!1).html('Send Message <i class="fal fa-long-arrow-right"></i>');return}if(""===r.trim()||!isValidPhone(r.trim())){displayResponse("Phone Number is Required Field",!0),$("#submitBtn").prop("disabled",!1).html('Send Message <i class="fal fa-long-arrow-right"></i>');return}var o=new FormData,l=$("#file")[0].files[0];o.append("file",l),o.append("name",a),o.append("email",n),o.append("phone",r),o.append("enquire_for",i),o.append("message",t),o.append("submitBtn",!0),$.ajax({url:"verify_recaptcha.php",type:"POST",data:{"g-recaptcha-response":s},dataType:"json",success:function(e){1==e.status?$.ajax({url:"contact_form_submission.php",type:"POST",data:o,contentType:!1,processData:!1,success:function(e){$("#submitBtn").prop("disabled",!1).html('Send Message <i class="fal fa-long-arrow-right"></i>'),displayResponse(e,!1),$("#contactForm")[0].reset()},error:function(e,s,a){$("#submitBtn").prop("disabled",!1).html('Send Message <i class="fal fa-long-arrow-right"></i>'),displayResponse("An error occurred while processing your request.",!0),console.log(e.responseText)}}):(displayResponse(e.msg,!0),$("#submitBtn").prop("disabled",!1).html('Send Message <i class="fal fa-long-arrow-right"></i>'))},error:function(e,s,a){$("#submitBtn").prop("disabled",!1).html('Send Message <i class="fal fa-long-arrow-right"></i>'),displayResponse("An error occurred while verifying the reCAPTCHA.",!0),console.log(e.responseText)}})})});
